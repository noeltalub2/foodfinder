<%-include ("./Include/Admin/head.ejs")%>

  <body>
    <%-include ("./Include/Admin/header.ejs")%>
      <!-- ======= Sidebar ======= -->
      <aside id="sidebar" class="sidebar">

        <ul class="sidebar-nav" id="sidebar-nav">

          <li class="nav-item">
            <a class="nav-link " href="/admin/dashboard">
              <i class="bi bi-columns-gap"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <!-- End Dashboard Nav -->
          </li><!-- End Components Nav -->
          <li class="nav-item">
            <a class="nav-link collapsed" href="/admin/users">
              <i class="bi bi-person-circle"></i>
              <span>Users Management</span>
            </a>
          </li><!-- End Error 404 Page Nav -->

          <li class="nav-item">
            <a class="nav-link collapsed" href="/admin/entrepreneurs">
              <i class="bi bi-people"></i>

              <span>Entrepreneurs Management</span>
            </a>
          </li><!-- End Blank Page Nav -->
          <li class="nav-item">
            <a class="nav-link collapsed" href="/admin/shops">

              <i class="bi bi-shop"></i>
              <span>Shop Management</span>
            </a>
          </li><!-- End Blank Page Nav -->

          


          <li class="nav-item">
            <a class="nav-link collapsed" href="/admin/reviews">

              <i class="bi bi-card-text"></i>
              <span>Reviews</span>
            </a>
          </li><!-- End Blank Page Nav -->
        </ul>

      </aside><!-- End Sidebar-->

      <main id="main" class="main">
        <div class="pagetitle">
          <h1>Dashboard</h1>
          <nav>
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="/admin/dashboard">Home</a></li>
              <li class="breadcrumb-item active">Dashboard</li>
            </ol>
          </nav>
        </div>
        <section class="section dashboard">
          <div class="row">
            <!-- Active User Card -->
            <div class="col-xxl-3 col-md-6">
              <div class="card info-card active-user-card">
                <div class="card-body">
                  <h5 class="card-title">Total User</h5>

                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-people"></i>
                    </div>
                    <div class="ps-3">
                      <h6>
                        <%=total_customer%>
                      </h6>

                    </div>
                  </div>
                </div>

              </div>
            </div>
            <!-- End Active User Card -->

            <!-- Inactive Card -->
            <div class="col-xxl-3 col-md-6">
              <div class="card info-card inactive-user-card">
                <div class="card-body">
                  <h5 class="card-title">Total Entrepreneur</h5>
                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-people"></i>
                    </div>
                    <div class="ps-3">
                      <h6>
                        <%=total_entrepreneur%>
                      </h6>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- End Inactive Card -->
            <!-- Inactive Card -->
            <div class="col-xxl-3 col-md-6">
              <div class="card info-card inactive-user-card">
                <div class="card-body">
                  <h5 class="card-title">Total Shops</h5>
                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-shop"></i>
                    </div>
                    <div class="ps-3">
                      <h6>
                        <%=total_shops%>
                      </h6>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- End Inactive Card -->
            <!-- Inactive Card -->
            <div class="col-xxl-3 col-md-6">
              <div class="card info-card inactive-user-card">
                <div class="card-body">
                  <h5 class="card-title">Total Reviews</h5>
                  <div class="d-flex align-items-center">
                    <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                      <i class="bi bi-card-text"></i>
                    </div>
                    <div class="ps-3">
                      <h6>
                        <%=total_reviews%>
                      </h6>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- End Inactive Card -->
          </div>

          <div class="row">

            <div class="col-lg-12">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">RECENT NEW USER <a href="/admin/users"
                      class="btn btn-success btn-sm float-end">View
                      All</a></h5>

                  <div class="table-responsive-md">
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">No.</th>
                          <th scope="col">Created Date</th>
                          <th scope="col">Username</th>
                          <th scope="col">Full Name</th>
                          <th scope="col">Phone</th>

                        </tr>
                      </thead>
                      <tbody>
                        <%recent_users.forEach((user,index)=> {%>
                          <tr>
                            <th scope="row">
                              <%=index + 1%>
                            </th>
                            <td>
                              <%=new Date(user.created_at).toLocaleString(undefined, {weekday: 'long' , year: 'numeric'
                                , month: 'long' , day: 'numeric' , hour: 'numeric' , minute: 'numeric' ,
                                second: 'numeric' , hour12: true})%>
                            </td>


                            <td>
                              <%=user.username%>
                            </td>

                            <td>
                              <%=user.name%>
                            </td>
                            <td>
                              <%=user.phone_number%>
                            </td>

                          </tr>
                          <%})%>
                      </tbody>
                    </table>
                  </div>


                </div>
              </div>
            </div>
            <div class="col-lg-12">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">RECENT NEW ENTREPRENEUR <a href="/admin/entrepreneurs"
                      class="btn btn-success btn-sm float-end">View
                      All</a></h5>

                  <!-- Table with stripped rows -->
                  <div class="table-responsive-md">
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">No.</th>
                          <th scope="col">Created Date</th>
                          <th scope="col">Username</th>
                          <th scope="col">Full Name</th>
                          <th scope="col">Phone</th>

                        </tr>
                      </thead>
                      <tbody>
                        <%recent_entrepreneurs.forEach((entrepreneur,index)=> {%>
                          <tr>
                            <th scope="row">
                              <%=index + 1%>
                            </th>
                            <td>
                              <%=new Date(entrepreneur.created_at).toLocaleString(undefined, {weekday: 'long' ,
                                year: 'numeric' , month: 'long' , day: 'numeric' , hour: 'numeric' , minute: 'numeric' ,
                                second: 'numeric' , hour12: true})%>
                            </td>


                            <td>
                              <%=entrepreneur.username%>
                            </td>

                            <td>
                              <%=entrepreneur.name%>
                            </td>
                            <td>
                              <%=entrepreneur.phone_number%>
                            </td>

                          </tr>
                          <%})%>
                      </tbody>
                    </table>
                  </div>


                  <!-- End Table with stripped rows -->

                </div>
              </div>
            </div>



            <div class="col-lg-12">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">RECENT REVIEWS <a href="/admin/shops"
                      class="btn btn-success btn-sm float-end">View
                      All</a></h5>

                  <!-- Table with stripped rows -->
                  <div class="table-responsive-md">
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">No. </th>
                          <th scope="col">Date</th>
                          <th scope="col">Username</th>
                          <th scope="col">Shop Name</th>
                          <th scope="col">Rating</th>
                          <th scope="col">Title</th>
                          <th scope="col">Comment</th>

                        </tr>
                      </thead>
                      <tbody>
                        <%recent_reviews.forEach((review,index)=> {%>
                          <tr>
                            <th scope="row">
                              <%=index + 1%>
                            </th>
                            <td>
                              <%=new Date(review.date).toLocaleString(undefined, {weekday: 'long' , year: 'numeric' ,
                                month: 'long' , day: 'numeric' , hour: 'numeric' , minute: 'numeric' , second: 'numeric'
                                , hour12: true})%>
                            </td>
                            <td>
                              <%=review.username%>
                            </td>

                            <td>
                              <%=review.name%>
                            </td>
                            <td><% for (let i=0; i < review.rating; i++) { %>
                              <span style="color: #ffb900;">
                                  <i class="fas fa-star fa-xs"></i>
                              </span>
                              <% } %>
                                  <% for (let i=review.rating; i < 5; i++) { %>
                                      <span style="color: #ffb900;">
                                          <i class="far fa-star fa-xs"></i>
                                      </span>
                                      <% } %> 
                                      (<%=review.rating%>)
                            </td>
                            <td>
                              <%=review.title%>
                            </td>
                            <td>
                              <%=review.comment%>
                            </td>

                          </tr>
                          <%})%>
                      </tbody>
                    </table>
                  </div>


                  <!-- End Table with stripped rows -->

                </div>
              </div>
            </div>
          </div>
        </section>

      </main>
      <!-- End #main -->




      <%-include ("./Include/Admin/script.ejs")%>
        <script>
          // Start Donut Chart
          document.addEventListener("DOMContentLoaded", () => {
            echarts.init(document.querySelector("#donutChart")).setOption({
              tooltip: {
                trigger: 'item'
              },
              legend: {
                top: '5%',
                left: 'center'
              },
              series: [{
                name: 'Access From',
                type: 'pie',
                radius: ['40%', '70%'],
                avoidLabelOverlap: false,
                label: {
                  show: false,
                  position: 'center'
                },
                emphasis: {
                  label: {
                    show: true,
                    fontSize: '18',
                    fontWeight: 'bold'
                  }
                },
                labelLine: {
                  show: false
                },
                data: [{
                  value: 1048,
                  name: 'Search Engine'
                },
                {
                  value: 735,
                  name: 'Direct'
                },
                {
                  value: 580,
                  name: 'Email'
                },
                {
                  value: 484,
                  name: 'Union Ads'
                },
                {
                  value: 300,
                  name: 'Video Ads'
                }
                ]
              }]
            });
          });
          // End Donut Chart

          // Start Vertical Bar Chart
          document.addEventListener("DOMContentLoaded", () => {
            echarts.init(document.querySelector("#verticalBarChart")).setOption({

              tooltip: {
                trigger: 'axis',
                axisPointer: {
                  type: 'shadow'
                }
              },
              legend: {},
              grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
              },
              xAxis: {
                type: 'value',
                boundaryGap: [0, 0.01]
              },
              yAxis: {
                type: 'category',
                data: ['Brazil', 'Indonesia', 'USA', 'India', 'China', 'World']
              },
              series: [{
                name: '2011',
                type: 'bar',
                data: [18203, 23489, 29034, 104970, 131744, 630230]
              },
              {
                name: '2012',
                type: 'bar',
                data: [19325, 23438, 31000, 121594, 134141, 681807]
              }
              ]
            });
          });
          // End Vertical Bar Chart

          // Start Area Chart
          document.addEventListener("DOMContentLoaded", () => {
            echarts.init(document.querySelector("#areaChart")).setOption({
              xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
              },
              yAxis: {
                type: 'value'
              },
              series: [{
                data: [820, 932, 901, 934, 1290, 1330, 1320],
                type: 'line',
                smooth: true,
                areaStyle: {}
              }]
            });
          });
          // End Area Chart

          // Start Bar Chart
          document.addEventListener("DOMContentLoaded", () => {
            echarts.init(document.querySelector("#barChart")).setOption({
              xAxis: {
                type: 'category',
                data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
              },
              yAxis: {
                type: 'value'
              },
              series: [{
                data: [120, 200, 150, 80, 70, 110, 130],
                type: 'bar'
              }]
            });
          });
    // End Bar Chart
        </script>


  </body>

  </html>